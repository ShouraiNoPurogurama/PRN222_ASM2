@page
@model IndexModel

@{
    ViewData["Title"] = "Index";
    Layout = "~/Pages/Shared/_Layout.cshtml";
}

<h1>Index</h1>

<p>
    <a asp-page="Create">Create New</a>
</p>
<table class="table">
    <thead>
    <tr>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].ImageFile)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].Name)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].Category)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].Description)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].Price)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].Ingredients)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].UsageInstructions)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].StockQuantity)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].CreatedAt)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].CreatedBy)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].LastModified)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Product[0].LastModifiedBy)
        </th>
        <th></th>
    </tr>
    </thead>
    @* Id here *@
    <tbody id="idProductList">
    @foreach (var item in Model.Product)
    {
        <tr id="tr_@item.Id">
            <td>
                <img src="@Url.Content("~/images/products/" + item.ImageFile)"
                     alt="Product Image"
                     class="img-thumbnail"
                     data-bs-toggle="modal"
                     data-bs-target="#imageModal"
                     onclick="showImage('@Url.Content("~/images/products/" + item.ImageFile)')"/>
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Category.Name)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Price)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Ingredients)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.UsageInstructions)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.StockQuantity)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreatedAt)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreatedBy)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.LastModified)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.LastModifiedBy)
            </td>
            <td>
                <a asp-page="./Edit" asp-route-id="@item.Id">Edit</a> |
                <a asp-page="./Details" asp-route-id="@item.Id">Details</a> |
                <a asp-page="./Delete" asp-route-id="@item.Id">Delete</a>
            </td>
        </tr>
        
    }
    </tbody>
    <input style="display: none" aclass="form-control" id="deleteButton"/>
    <input style="display: none" aclass="form-control" id="sendButton"/>
</table>

<script src="~/lib/signalr/dist/browser/signalr.js"></script>
<script src="~/js/SalesManagementClient.js"></script>

<script>
    function showImage(imgSrc) {
        document.getElementById("modalImage").src = imgSrc;
    }

    document.addEventListener("DOMContentLoaded", function () {
        var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
            return new bootstrap.Tooltip(tooltipTriggerEl);
        });
    });
</script>